{% block ergonode_attribute_mapping_page %}
    <sw-page class="ergonode__attribute-mapping-page">
        <template slot="content">
            <sw-card-view>
                <sw-tabs>
                    <sw-tabs-item
                        :route="{ path: 'mapping' }"
                        :active="true"
                    >{{ $t('ErgonodeIntegrationShopware.tabs.attributeMappings') }}</sw-tabs-item>
                    <sw-tabs-item
                        :route="{ path: 'synchronization' }"
                        :active="false"
                        :disabled="!acl.can('ergonode_synchronization.viewer')"
                    >{{ $t('ErgonodeIntegrationShopware.tabs.synchronization') }}</sw-tabs-item>
                </sw-tabs>
                <sw-skeleton v-if="isLoading"></sw-skeleton>
                <template v-else>
                    <sw-card v-if="acl.can('ergonode_attribute_mapping.creator')"
                        :title="$t('ErgonodeIntegrationShopware.mappings.addAttributeMapping')"
                    >
                        <sw-single-select
                            :label="$t('ErgonodeIntegrationShopware.mappings.shopwareAttribute')"
                            :options="shopwareAttributesSelectOptions"
                            v-model="createShopwareAttribute"
                        >
                        </sw-single-select>
                        <sw-single-select
                            :label="$t('ErgonodeIntegrationShopware.mappings.ergonodeAttribute')"
                            :options="ergonodeAttributesSelectOptions"
                            v-model="createErgonodeAttribute"
                        >
                        </sw-single-select>
                        <sw-button
                            variant="primary"
                            :isLoading="isCreateLoading"
                            :disabled="buttonDisabled"
                            @click="addMapping"
                        >
                            {{ $t('ErgonodeIntegrationShopware.mappings.addAttributeMapping') }}
                        </sw-button>
                        <sw-label v-if="mappingAlreadyExists"
                                  variant="danger"
                        >
                            {{ $t('ErgonodeIntegrationShopware.mappings.messages.mappingAlreadyExists') }}
                        </sw-label>
                    </sw-card>
                    <sw-card v-if="acl.can('ergonode_attribute_mapping.viewer')"
                        class="ergonode__attribute-mapping-grid-card"
                        :title="$t('ErgonodeIntegrationShopware.mappings.attributeMappings')"
                    >
                        <template #default>
                            <sw-entity-listing
                                class="ergonode__attribute-mapping-grid"
                                :columns="columns"
                                :items="mappings"
                                :repository="repository"
                                :fullPage="false"
                                :allow-delete="acl.can('ergonode_attribute_mapping.deleter')"
                                :allow-edit="false"
                                :allow-inline-edit="false"
                                :is-loading="isMappingLoading"
                                @delete-item-finish="fetchMappings()"
                            >
                            </sw-entity-listing>
                        </template>
                    </sw-card>
                </template>
            </sw-card-view>
        </template>
    </sw-page>
{% endblock %}
